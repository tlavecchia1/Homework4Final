'use strict';var Fg;n("mr.IssueSeverity",{r$:"fatal",eca:"warning",yaa:"notification"},void 0);n("mr.IssueAction",{Naa:"ok",CANCEL:"cancel",f$:"dismiss",gaa:"learn_more"},void 0);var Gg=function(a,b,c){this.routeId=null;this.severity=b;this.isBlocking="fatal"==this.severity?!0:!1;this.title=a;this.message=null;this.defaultAction=c;this.helpUrl=this.secondaryActions=null};Gg.prototype.N4=function(a){if(!a&&"fatal"==this.severity)throw Error("All FATAL issues must be blocking.");this.isBlocking=a;return this};var Hg=function(a){this.Fb=a;this.Ek=t();this.a=A("mr.Timing")};Hg.prototype.Cu=function(a,b){null!=b&&(a+="_"+b);return a};Hg.prototype.vk=function(a){this.Fb=a};Hg.prototype.end=function(a){var b=t()-this.Ek;a=this.Cu(this.Fb,a);0>b&&(E(this.a,"Timing analytics event with negative time"),b=0);1E4<b&&(b=1E4);try{chrome.metricsPrivate.recordTime(a,b)}catch(c){E(this.a,"Failed to record time "+b+" in "+a)}};var Ig=function(a){Hg.call(this,a);this.a=A("mr.MediumTiming")};u(Ig,Hg);
Ig.prototype.end=function(a){var b=t()-this.Ek;a=this.Cu(this.Fb,a);if(0>b)E(this.a,"Timing analytics event with negative time");else{1E4>b&&(b=1E4);18E4<b&&(b=18E4);try{chrome.metricsPrivate.recordMediumTime(a,b)}catch(c){E(this.a,"Failed to record time "+b+" in "+a)}}};var Jg=function(a){Hg.call(this,a);this.a=A("mr.LongTiming")};u(Jg,Hg);
Jg.prototype.end=function(a){var b=t()-this.Ek;a=this.Cu(this.Fb,a);if(0>b)E(this.a,"Timing analytics event with negative time");else{18E4>b&&(b=18E4);36E5<b&&(b=36E5);try{chrome.metricsPrivate.recordLongTime(a,b)}catch(c){E(this.a,"Failed to record time "+b+" in "+a)}}};
var Kg=A("mr.Analytics"),Lg=function(a){try{chrome.metricsPrivate.recordUserAction(a)}catch(b){E(Kg,"Failed to record event "+a)}},Mg=function(a,b,c){var e,f=0,g;for(g in c)f++,c[g]==b&&(e=g);if(m(e)){c={metricName:a,type:"histogram-linear",min:1,max:f,buckets:f+1};try{chrome.metricsPrivate.recordValue(c,b)}catch(k){E(Kg,"Failed to record enum value "+e+" ("+b+") in "+a,k)}}else B(Kg,"Unknown analytics value, "+b+" for histogram, "+a,Error())};var Ng={L9:0,J9:1,N9:2,K9:3,r9:4,M9:5,M$:6,Lba:7,b$:8,Dz:9},Og=function(a){Mg("MediaRouter.Mirror.Capturing.Failure",a,Ng)};var Pg=function(a){this.Li=a;this.rm=this.xm=null;this.a=A("mr.mirror.MediaStream")},Qg={message:"empty-stream"};d=Pg.prototype;d.y5=function(a){this.xm=a};d.vC=function(){return this.Li};d.Mu=function(){return this.rm};d.start=function(){return this.Li.ZE()?this.t7():this.k7()};
d.t7=function(){var a=this.Li.iK();F(this.a,"Starting tab capture with constraints "+JSON.stringify(a));return(new Od(function(b,c){chrome.tabCapture.capture(a,function(a){a?(this.DJ(a),b(this)):c(Error(chrome.runtime.lastError&&chrome.runtime.lastError.message?chrome.runtime.lastError.message:Qg))}.bind(this));Je(function(){c(Error("chrome.tabCapture.capture failed to call its callback"))},5E3,this)},this)).na(function(a){this.pG(a)},this)};
d.UW=function(a){a&&F(this.a,"Track "+JSON.stringify(a.target)+" ended");this.stop()};d.pG=function(a){var b="";a.name&&(b=a.name);a.message&&(b&&(b+="-"),b+=a.message);a=this.Li.lt;"tab"==a&&"empty_stream"==b?Og(0):"desktop"==a&&"Error-timeout"==b?Og(1):"desktop"==a&&"Error-user_cancel"==b?Og(3):"tab"==a&&"Error-timeout"==b?Og(5):Og(9);throw Error("Failed to capture "+this.Li.lt);};
d.k7=function(){return(new Od(function(a,b){var c=this.Li.iK();F(this.a,"Starting desktop capture with constraints "+JSON.stringify(c));navigator.webkitGetUserMedia(c,a,b)},this)).then(function(a){if(a)this.DJ(a);else throw Error(Qg);return this},null,this).na(function(a){this.pG(a)},this)};d.DJ=function(a){this.rm=a;a.getTracks().forEach(function(a){a.onended=this.UW.bind(this)},this)};
d.stop=function(){this.rm&&(this.rm.getTracks().forEach(function(a){a.onended=null;a.stop()}),this.rm=null,this.xm&&this.xm())};var Sg=function(a){return Rg(a)||"urn:x-org.chromium.media:source:desktop"==a},Tg=["https://docs.google.com"],Rg=function(a){return qa(a,"urn:x-org.chromium.media:source:tab:")||-1!=a.indexOf("0F5096E8")};var Ug=function(a){return(new Od(function(b){chrome.tabs.get(a,b)})).then(function(b){if(!b)throw Error("No such tab "+a);return b})};var Vg=chrome.i18n.getMessage("1639753794700094338");var Wg=function(a,b){ae.call(this);this.v3=a;this.Hh=b;this.Ng=this.Ma=null;this.m=A("mr.mirror.Service."+a);this.NG=r(this.SW,this);this.dl=!1};u(Wg,ae);d=Wg.prototype;d.getName=function(){return this.v3};d.kn=function(a,b,c,e){F(this.m,"Start mirroring on route "+a.id);return Rg(b)?Ug(a.$d.tabId).then(function(){return this.pB(a,b,c,e)},function(a){this.HF(a);throw a;},this):this.pB(a,b,c,e)};
d.pB=function(a,b,c,e){var f=this.sj(b,c);return this.$J().then(function(){return(new Pg(f.vC())).start()}).then(function(b){this.Ng=b;b.y5(r(this.xm,this,b));return e?e(a):a},null,this).then(function(a){this.Ma=this.zt(f,a);return this.Ma.start(this.Ng.Mu())},null,this).then(function(){f.$E()?(chrome.tabs.onUpdated.addListener(this.NG),this.Ma.z8(a.$d.tabId).then(this.Ma.Ux.bind(this.Ma),function(a){B(this.m,"Failed to obtain initial tab info.",a)},this),this.sx()):(this.Ma.eJ("Capturing Desktop",
"Capturing Desktop",null),this.ox(),this.Ma.Ux());this.sO(c,this.Ng);return this.Ma.Ap()},null,this).na(function(a){this.HF(a);this.qf();throw a;},this)};d.HF=function(a){var b="";a.name&&(b=a.name);a.message&&(b&&(b+="-"),b+=a.message);b||(b="Error-unknown");this.qx(b)};d.xm=function(a){this.Ng==a&&(this.rx(),this.qf())};d.$J=function(){return this.qf().then(function(a){a&&this.px();return a},null,this)};
d.qf=function(){if(this.dl)return H(!1);this.dl=!0;chrome.tabs.onUpdated.removeListener(this.NG);this.Ng&&(this.Ng.stop(),this.Ng=null);if(this.Ma)return this.kA().then(function(){this.Ma&&(this.Ma.stop(),this.Ma.hb(),this.Hh.Lw(this.Ma.Ap().id),this.Ma=null);this.dl=!1;return!0},function(a){B(this.m,"Error cleaning up",a);this.dl=!1},this);this.dl=!1;return H(!1)};d.kA=function(){return H()};
d.SW=function(a,b,c){this.Ma&&this.Ma.tabId&&this.Ma.tabId==a&&("complete"==b.status||b.favIconUrl&&"complete"==c.status)&&(this.Ma.DK(c),this.Hh.yG(this.Ma.Ap()),this.Ma.Ux())};d.sO=function(a,b){a.captureAudio&&b.Mu()&&!b.Mu().getAudioTracks().length&&this.Hh.Gf().send(new Gg(Vg,"notification","dismiss"))};d.LR=function(){return this.Ma};var Xg=function(a){ae.call(this);this.Ca=a;this.$p=!1;this.tabId=this.Ax=this.iconUrl=null};u(Xg,ae);d=Xg.prototype;d.eJ=function(a,b,c){this.Ca.description=a;this.$p||this.Ca.offTheRecord?this.iconUrl=this.Ax=null:(this.Ax=b,this.iconUrl=c)};d.Ux=function(){this.$p||this.Ca.offTheRecord||this.mI()};d.z8=function(a){this.tabId=a;return Ug(a).then(this.DK.bind(this))};
d.DK=function(a){this.$p=a.incognito;this.eJ(a.title,qa(a.url,"file://")?"Local content (Tab)":Ne(a.url.match(Me)[3]||null,!0)+" (Tab)",a.favIconUrl)};d.Ap=function(){return this.Ca};d.mI=ca;d.K=function(){this.stop()};var Yg=function(a,b){this.type=a;this.data=b},Zg=function(a){a=JSON.parse(a);if(!a.type)throw Error("Invalid message");return new Yg(a.type,a.data)},$g=function(a,b,c){this.settings=a;this.mediaConstraints=b;this.description=c};var ah=function(a){this.u3=a};ah.prototype.nm=function(){return H(this.u3)};var bh=function(a,b){this.width=a;this.height=b};d=bh.prototype;d.clone=function(){return new bh(this.width,this.height)};d.toString=function(){return"("+this.width+" x "+this.height+")"};d.dN=function(){return this.width*this.height};d.Qa=function(){return!this.dN()};d.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};d.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
d.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};d.scale=function(a,b){var c=q(b)?b:a;this.width*=a;this.height*=c;return this};var ch=!Ec&&!Cc||Cc&&9<=Number(Yc)||Ec&&Wc("1.9.1");Cc&&Wc("9");var eh=function(a,b){rb(b,function(b,e){"style"==e?a.style.cssText=b:"class"==e?a.className=b:"for"==e?a.htmlFor=b:dh.hasOwnProperty(e)?a.setAttribute(dh[e],b):qa(e,"aria-")||qa(e,"data-")?a.setAttribute(e,b):a[e]=b})},dh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},fh=function(a){return a?a.parentWindow||a.defaultView:
window},hh=function(a,b,c,e){function f(c){c&&b.appendChild(p(c)?a.createTextNode(c):c)}for(;e<c.length;e++){var g=c[e];!ha(g)||ja(g)&&0<g.nodeType?f(g):v(gh(g)?x(g):g,f)}},ih=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null},gh=function(a){if(a&&"number"==typeof a.length){if(ja(a))return"function"==typeof a.item||"string"==typeof a.item;if(ia(a))return"function"==typeof a.item}return!1},jh=function(a){this.Io=a||h.document||document};d=jh.prototype;d.kS=function(){return this.Io};
d.setProperties=eh;d.createElement=function(a){return this.Io.createElement(a)};d.createTextNode=function(a){return this.Io.createTextNode(String(a))};d.getWindow=function(){var a=this.Io;return a.parentWindow||a.defaultView};d.appendChild=function(a,b){a.appendChild(b)};d.append=function(a,b){hh(9==a.nodeType?a:a.ownerDocument||a.document,a,arguments,1)};d.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
d.removeNode=ih;d.getChildren=function(a){return ch&&void 0!=a.children?a.children:Sa(a.childNodes,function(a){return 1==a.nodeType})};d.isElement=function(a){return ja(a)&&1==a.nodeType};d.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
var kh=function(a,b){this.jr=[];this.oG=a;this.gB=b||null;this.Wl=this.Bf=!1;this.Ue=void 0;this.Ey=this.kN=this.Ws=!1;this.Yr=0;this.sb=null;this.bo=0};d=kh.prototype;d.cancel=function(a){if(this.Bd())this.Ue instanceof kh&&this.Ue.cancel();else{if(this.sb){var b=this.sb;delete this.sb;a?b.cancel(a):b.mN()}this.oG?this.oG.call(this.gB,this):this.Ey=!0;this.Bd()||this.oa(new lh(this))}};d.mN=function(){this.bo--;0>=this.bo&&this.cancel()};d.$A=function(a,b){this.Ws=!1;this.bz(a,b)};
d.bz=function(a,b){this.Bf=!0;this.Ue=b;this.Wl=!a;this.SB()};d.DA=function(){if(this.Bd()){if(!this.Ey)throw new mh(this);this.Ey=!1}};d.callback=function(a){this.DA();this.bz(!0,a)};d.oa=function(a){this.DA();this.LF(a);this.bz(!1,a)};d.LF=function(){};d.ia=function(a,b){return this.yg(a,null,b)};d.bc=function(a,b){return this.yg(null,a,b)};d.CM=function(a,b){return this.yg(a,a,b)};d.yg=function(a,b,c){this.jr.push([a,b,c]);this.Bd()&&this.SB();return this};
d.then=function(a,b,c){var e,f,g=new Od(function(a,b){e=a;f=b});this.yg(e,function(a){a instanceof lh?g.cancel():f(a)});return g.then(a,b,c)};Ld(kh);d=kh.prototype;d.mt=function(a){this.yg(a.callback,a.oa,a);return this};d.gA=function(a){return a instanceof kh?this.ia(r(a.Zs,a)):this.ia(function(){return a})};d.Zs=function(a){var b=new kh;this.mt(b);a&&(b.sb=this,this.bo++);return b};d.Bd=function(){return this.Bf};d.zX=function(a){return a instanceof Error};d.uE=function(){return Ua(this.jr,function(a){return ia(a[1])})};
d.SB=function(){if(this.Yr&&this.Bd()&&this.uE()){var a=this.Yr,b=nh[a];b&&(b.B2(),delete nh[a]);this.Yr=0}this.sb&&(this.sb.bo--,delete this.sb);for(var a=this.Ue,c=b=!1;this.jr.length&&!this.Ws;){var e=this.jr.shift(),f=e[0],g=e[1],e=e[2];if(f=this.Wl?g:f)try{var k=f.call(e||this.gB,a);m(k)&&(this.Wl=this.Wl&&(k==a||this.zX(k)),this.Ue=a=k);if(Md(a)||"function"===typeof h.Promise&&a instanceof h.Promise)this.Ws=c=!0}catch(l){a=l,this.Wl=!0,this.LF(a),this.uE()||(b=!0)}}this.Ue=a;c&&(k=r(this.$A,
this,!0),c=r(this.$A,this,!1),a instanceof kh?(a.yg(k,c),a.kN=!0):a.then(k,c));b&&(a=new oh(a),nh[a.Uc]=a,this.Yr=a.Uc)};var ph=function(a){var b=new kh;b.callback(a);return b},qh=function(a){var b=new kh;b.oa(a);return b},mh=function(){pa.call(this)};u(mh,pa);mh.prototype.message="Deferred has already fired";mh.prototype.name="AlreadyCalledError";var lh=function(){pa.call(this)};u(lh,pa);lh.prototype.message="Deferred was canceled";lh.prototype.name="CanceledError";
var oh=function(a){this.Uc=h.setTimeout(r(this.T7,this),0);this.Ko=a};oh.prototype.T7=function(){delete nh[this.Uc];throw this.Ko;};oh.prototype.B2=function(){h.clearTimeout(this.Uc)};var nh={};var vh=function(a,b){var c=b||{},e=c.document||document,f=document.createElement("SCRIPT"),g={gI:f,qn:void 0},k=new kh(rh,g),l=null,w=null!=c.timeout?c.timeout:5E3;0<w&&(l=window.setTimeout(function(){sh(f,!0);k.oa(new th(1,"Timeout reached for loading script "+a))},w),g.qn=l);f.onload=f.onreadystatechange=function(){f.readyState&&"loaded"!=f.readyState&&"complete"!=f.readyState||(sh(f,c.Fda||!1,l),k.callback(null))};f.onerror=function(){sh(f,!0,l);k.oa(new th(0,"Error while loading script "+a))};
g=c.attributes||{};Eb(g,{type:"text/javascript",charset:"UTF-8",src:a});eh(f,g);uh(e).appendChild(f);return k},uh=function(a){var b=a.getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement},rh=function(){if(this&&this.gI){var a=this.gI;a&&"SCRIPT"==a.tagName&&sh(a,!0,this.qn)}},sh=function(a,b,c){null!=c&&h.clearTimeout(c);a.onload=ca;a.onerror=ca;a.onreadystatechange=ca;b&&window.setTimeout(function(){ih(a)},0)},th=function(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+
b);pa.call(this,c);this.code=a};u(th,pa);var wh=function(){this.Hh=this.Pp=null;this.sw=J()};da(wh);wh.prototype.nm=function(){if(this.Pp)return H(this.Pp);this.iY().then(null,function(){this.sw.reject(Error("Failed to load hangouts mirroring script."))},this);return this.sw.promise};wh.prototype.f5=function(a){this.Hh=a};wh.prototype.AH=function(a){this.Hh&&(this.Pp=a(this.Hh),this.sw.resolve(this.Pp))};wh.prototype.iY=function(){var a=chrome.extension.getURL("mirroring_hangouts.js");return vh(a)};var xh=function(){return null!=Ob&&-1!=Ob.indexOf("CrOS")},yh=function(){var a=Ob;if(!p(a))return!1;a=a.match(/Windows NT \d+.\d+/);if(null===a||!ga(a))return!1;a=a[0];a=a.match(/\d+.\d+/);if(null===a||!ga(a))return!1;a=a[0];return 6.2<=parseFloat(a)};var zh="undefined"!=typeof chrome&&!!chrome.networkingPrivate&&!!chrome.networkingPrivate.setWifiTDLSEnabledState&&xh(),Ah=xh()||Kc;var Ch=function(){this.maxWidth=1920;this.maxHeight=1080;this.minWidth=320;this.minHeight=180;this.maxFrameRate=30;this.minVideoBitrate=300;this.maxVideoBitrate=5E3;this.audioBitrate=128;this.maxLatencyMillis=800;this.minLatencyMillis=120;this.animatedLatencyMillis=400;this.dscpEnabled=Jc||Lc||xh()||yh();this.enableLogging=!0;this.useTdls=!1;this.captureAudio=this.captureVideo=!0;this.a=A("mr.mirror.Settings");var a=window.localStorage?window.localStorage.getItem(Bh):null;if(p(a))try{var b=JSON.parse(a);
b&&(this.GK(b),E(this.a,"Initial mr.mirror.Settings overridden to: "+this.Qy()))}catch(c){throw B(this.a,Bh+' must be of the form \'{"maxWidth":640, "maxHeight":360}\'.',c),Error("Overrides not parseable.  See ERROR log for details.");}},Bh="mr.mirror.Settings.Overrides";d=Ch.prototype;d.clone=function(){var a=new Ch;a.GK(this);return a};d.Qy=function(){return JSON.stringify(this,function(a,b){if(0==a.length||"boolean"==typeof b||"number"==typeof b||"string"==typeof b)return b})};
d.GK=function(a){for(var b in this){var c=a[b];if(null!=c){var e=this[b];"boolean"!=typeof e&&"number"!=typeof e&&"string"!=typeof e||typeof e!=typeof c||(this[b]=c)}}};
d.xO=function(){var a=screen.width,b=screen.height,c=0,e=0;this.maxHeight*a<this.maxWidth*b?(c=Math.min(this.maxWidth,a),c-=c%160,e=90*c/160):(e=Math.min(this.maxHeight,b),e-=e%90,c=160*e/90);if(c<Math.max(160,this.minWidth)||e<Math.max(90,this.minHeight))c=Math.max(160,this.minWidth),e=Math.max(90,this.minHeight);this.maxWidth=c;this.maxHeight=e};d.EP=function(){this.minHeight=this.minWidth=0};
var Dh=function(a,b){var c=new Ch;c.captureAudio=a;c.captureVideo=b;c.xO();F(c.a,"mr.mirror.Settings after screen size adjustments: "+c.Qy());return c};Ch.prototype.RT=function(){return String(this.minWidth+"x"+this.minHeight)};Ch.prototype.BT=function(){return String(this.maxWidth+"x"+this.maxHeight)};Ch.prototype.VU=function(){return this.minWidth==this.maxWidth&&this.minHeight==this.maxHeight?"fixed":0<this.minWidth&&0<this.minHeight?"fixed-aspect-ratio":"variable"};var Eh=function(a,b){this.lt=a;this.zb=b};Eh.prototype.ZE=function(){return"tab"==this.lt};Eh.prototype.iK=function(){return this.ZE()?this.Z7():this.Y7()};Eh.prototype.Z7=function(){var a={audio:this.zb.captureAudio,video:this.zb.captureVideo};this.zb.captureVideo&&(a.videoConstraints={mandatory:{minWidth:this.zb.minWidth,minHeight:this.zb.minHeight,maxWidth:this.zb.maxWidth,maxHeight:this.zb.maxHeight,maxFrameRate:this.zb.maxFrameRate,enableAutoThrottling:!0}});return a};
Eh.prototype.Y7=function(){var a={audio:!1,video:!1};this.zb.captureVideo&&(a.video={mandatory:{chromeMediaSource:"screen",minWidth:this.zb.minWidth,minHeight:this.zb.minHeight,maxWidth:this.zb.maxWidth,maxHeight:this.zb.maxHeight,maxFrameRate:this.zb.maxFrameRate}});Ah&&this.zb.captureAudio&&(a.audio={mandatory:{chromeMediaSource:"system"}});return a};var Fh=function(a,b){this.EY=a;this.zb=b};d=Fh.prototype;d.Hf=function(){return this.zb};d.vC=function(){return this.$E()?this.GV():this.aS()};d.$E=function(){return Rg(this.EY)};d.GV=function(){return new Eh("tab",this.zb)};d.aS=function(){return new Eh("desktop",this.zb)};var Gh=function(a){ae.call(this);this.A=a;this.pa={}};u(Gh,ae);var Hh=[];d=Gh.prototype;d.listen=function(a,b,c,e){return this.zF(a,b,c,e)};d.dY=function(a,b,c,e,f){return this.zF(a,b,c,e,f)};d.zF=function(a,b,c,e,f){ga(b)||(b&&(Hh[0]=b.toString()),b=Hh);for(var g=0;g<b.length;g++){var k=ve(a,b[g],c||this.handleEvent,e||!1,f||this.A||this);if(!k)break;this.pa[k.key]=k}return this};d.mm=function(a,b,c,e){return this.xF(a,b,c,e)};
d.xF=function(a,b,c,e,f){if(ga(b))for(var g=0;g<b.length;g++)this.xF(a,b[g],c,e,f);else{a=Ce(a,b,c||this.handleEvent,e,f||this.A||this);if(!a)return this;this.pa[a.key]=a}return this};d.Mc=function(a,b,c,e,f){if(ga(b))for(var g=0;g<b.length;g++)this.Mc(a,b[g],c,e,f);else c=c||this.handleEvent,f=f||this.A||this,c=we(c),e=!!e,b=ne(a)?a.Fl(b,c,e,f):a?(a=ye(a))?a.Fl(b,c,e,f):null:null,b&&(Ee(b),delete this.pa[b.key]);return this};
d.removeAll=function(){rb(this.pa,function(a,b){this.pa.hasOwnProperty(b)&&Ee(a)},this);this.pa={}};d.K=function(){Gh.R.K.call(this);this.removeAll()};d.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var Ih=function(a){this.Xj=0;this.Oj=a||100;this.oe=[]};d=Ih.prototype;d.add=function(a){var b=this.oe[this.Xj];this.oe[this.Xj]=a;this.Xj=(this.Xj+1)%this.Oj;return b};d.get=function(a){a=this.hG(a);return this.oe[a]};d.set=function(a,b){a=this.hG(a);this.oe[a]=b};d.M=function(){return this.oe.length};d.Qa=function(){return 0==this.oe.length};d.clear=function(){this.Xj=this.oe.length=0};d.v=function(){return this.eU(this.M())};
d.eU=function(a){var b=this.M(),c=[];for(a=this.M()-a;a<b;a++)c.push(this.get(a));return c};d.Xa=function(){for(var a=[],b=this.M(),c=0;c<b;c++)a[c]=c;return a};d.Ja=function(a){return a<this.M()};d.Si=function(a){for(var b=this.M(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};d.hG=function(a){if(a>=this.oe.length)throw Error("Out of bounds exception");return this.oe.length<this.Oj?a:(this.Xj+Number(a))%this.Oj};var Jh=function(){this.CH=t()},Kh=new Jh;Jh.prototype.set=function(a){this.CH=a};Jh.prototype.reset=function(){this.set(t())};Jh.prototype.get=function(){return this.CH};var Lh=function(a){this.W0=a||"";this.u7=Kh};d=Lh.prototype;d.Zz=!0;d.Cy=!0;d.a7=!0;d.Z6=!0;d.Er=!1;d.Dy=!1;var Mh=function(a){return 10>a?"0"+a:String(a)},Nh=function(a,b){var c=(a.sD()-b)/1E3,e=c.toFixed(3),f=0;if(1>c)f=2;else for(;100>c;)f++,c*=10;for(;0<f--;)e=" "+e;return e},Oh=function(a){Lh.call(this,a)};u(Oh,Lh);
Oh.prototype.XB=function(a){var b=[];b.push(this.W0," ");if(this.Cy){var c=new Date(a.sD());b.push("[",Mh(c.getFullYear()-2E3)+Mh(c.getMonth()+1)+Mh(c.getDate())+" "+Mh(c.getHours())+":"+Mh(c.getMinutes())+":"+Mh(c.getSeconds())+"."+Mh(Math.floor(c.getMilliseconds()/10)),"] ")}this.a7&&b.push("[",Nh(a,this.u7.get()),"s] ");this.Z6&&b.push("[",a.jD(),"] ");this.Dy&&b.push("[",a.Ju().name,"] ");b.push(a.getMessage());this.Er&&(a=a.RC())&&b.push("\n",a instanceof Error?a.message:a.toString());this.Zz&&
b.push("\n");return b.join("")};var Ph=function(a){return(a=a.exec(Ob))?a[1]:""},Qh=function(){if(df)return Ph(/Firefox\/([0-9.]+)/);if(Cc||Dc||Bc)return Uc;if(hf)return Ph(/Chrome\/([0-9.]+)/);if(jf&&!(Ac()||y("iPad")||y("iPod")))return Ph(/Version\/([0-9.]+)/);if(ef||ff){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(Ob);if(a)return a[1]+"."+a[2]}else if(gf)return(a=Ph(/Android\s+([0-9.]+)/))?a:Ph(/Version\/([0-9.]+)/);return""}();var Rh=function(a,b,c,e,f,g,k){this.Wg=null;this.KA=!1;this.JA=J();this.$b=[];this.Rn=a?encodeURIComponent(String(a)):null;this.$B=null;!e&&b&&(this.$B=b);this.YM=c||null;this.Xn=!e;this.Jo=null!=f?f:null;this.Ew=g||null;this.I8=!!k};u(Rh,ae);d=Rh.prototype;d.init=function(){var a=r(function(a){this.Wg=a;var b=ba("client.request",a),f=ba("auth",a);b&&f?this.pE():a.load("client",r(this.pE,this))},this),b=this.NB("gapi");b?a(b.gapi):this.hY(a);return this.JA.promise};
d.NB=function(a){for(var b=window,c=ba(a,b);!c&&b!=window.top&&this.ZN(b.parent,a);)b=b.parent,c=ba(a,b);return c?b:null};d.ZN=function(a,b){try{return!!a&&null!=a.location.href&&de(a,b)}catch(c){return!1}};d.hY=function(a){var b=this.NB("gapi_onload");if(b){var c=b.gapi_onload;b.gapi_onload=function(){c();a(b.gapi)}}else window.gapi_onload=function(){a(window.gapi)},vh("https://apis.google.com/js/client.js")};d.mj=function(){return this.Wg};
d.pE=function(){for(var a=0;a<this.$b.length;a++)this.$b[a].kb.resolve(this.pI(this.$b[a].r2));this.KA=!0;this.JA.resolve(this.mj())};d.sendRequest=function(a){if(this.KA)return this.pI(a);var b=J();this.$b.push({r2:a,kb:b});return b.promise};
d.pI=function(a){var b,c,e,f=ba("config.get",this.mj());this.Xn||(b=f("googleapis.config/auth/useFirstPartyAuth"),c=f("googleapis.config/auth/useOriginToken"));null!=this.Jo&&(e=f("client/cors"));try{var g=ba("config.update",this.mj());this.Xn||(g("googleapis.config/auth/useFirstPartyAuth",!1),g("googleapis.config/auth/useOriginToken",!1));null!=this.Jo&&g("client/cors",this.Jo);var k=ba("client.request",this.mj()),l=this.aR();a.headers&&Eb(l,a.headers);var w={headers:l,root:this.YM,path:a.path,method:a.method,
body:a.body};this.Rn&&!this.Ew&&(w.params={key:this.Rn});var C=H(k(w));a.callback&&C.then(function(b){a.callback.apply(null,[b.result,b])},function(b){a.callback.apply(null,[b.result,b])});return C}finally{g=ba("config.update",this.mj()),this.Xn||(g("googleapis.config/auth/useFirstPartyAuth",b),g("googleapis.config/auth/useOriginToken",c)),null!=this.Jo&&g("client/cors",e)}};
d.aR=function(){if(this.Xn){if(this.Ew)return{Authorization:"Bearer "+this.Ew};var a=ba("auth.getAuthHeaderValueForFirstParty",this.mj());return{Authorization:this.I8?a([]):a(),"X-Goog-AuthUser":this.$B}}return{}};
